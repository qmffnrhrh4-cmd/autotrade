<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µí•© ì„¤ì • - AutoTrade Pro v4.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary-color: #667eea;
            --primary-dark: #5568d3;
            --success-color: #00c853;
            --danger-color: #d32f2f;
            --warning-color: #ffa726;
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-color: #e0e0e0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
        }

        /* ë‹¤í¬ ëª¨ë“œ */
        body.dark-mode {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --border-color: #404040;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
        }

        .theme-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .tab {
            padding: 12px 24px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            border-color: var(--primary-color);
        }

        .tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .settings-panel {
            display: none;
        }

        .settings-panel.active {
            display: block;
        }

        .settings-section {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .form-label small {
            color: #999;
            font-weight: 400;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            background: var(--card-bg);
            color: var(--text-color);
            transition: all 0.3s;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.show {
            display: block;
        }

        .alert-success {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid var(--success-color);
        }

        .alert-danger {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid var(--danger-color);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>âš™ï¸ í†µí•© ì„¤ì •</h1>
                <p style="margin-top: 5px; opacity: 0.9;">ëª¨ë“  ê¸°ëŠ¥ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬</p>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>
        </div>

        <div class="alert alert-success" id="success-alert">
            <strong>âœ… ì„±ê³µ!</strong> ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.
        </div>

        <div class="alert alert-danger" id="error-alert">
            <strong>âŒ ì˜¤ë¥˜!</strong> <span id="error-message"></span>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('system')">ì‹œìŠ¤í…œ</div>
            <div class="tab" onclick="switchTab('connection')">ì—°ê²° ìƒíƒœ</div>
            <div class="tab" onclick="switchTab('risk')">ë¦¬ìŠ¤í¬ ê´€ë¦¬</div>
            <div class="tab" onclick="switchTab('strategies')">ì „ëµ ì„¤ì •</div>
            <div class="tab" onclick="switchTab('ai')">AI ë¶„ì„</div>
            <div class="tab" onclick="switchTab('backtest')">ë°±í…ŒìŠ¤íŒ…</div>
            <div class="tab" onclick="switchTab('notification')">ì•Œë¦¼</div>
            <div class="tab" onclick="switchTab('ui')">UI ì„¤ì •</div>
        </div>

        <!-- ì‹œìŠ¤í…œ ì„¤ì • -->
        <div id="panel-system" class="settings-panel active">
            <div class="settings-section">
                <div class="section-title">ì‹œìŠ¤í…œ ì„¤ì •</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="trading_enabled">
                            ë§¤ë§¤ ê¸°ëŠ¥ í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="test_mode">
                            í…ŒìŠ¤íŠ¸ ëª¨ë“œ
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë¡œê·¸ ë ˆë²¨</label>
                        <select class="form-select" id="logging_level">
                            <option value="DEBUG">DEBUG</option>
                            <option value="INFO" selected>INFO</option>
                            <option value="WARNING">WARNING</option>
                            <option value="ERROR">ERROR</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ìµœëŒ€ ë™ì‹œ AI ë¶„ì„ ìˆ˜</label>
                        <input type="number" class="form-input" id="max_concurrent_analysis" value="3" min="1" max="10">
                    </div>
                </div>
            </div>
        </div>

        <!-- ì—°ê²° ìƒíƒœ -->
        <div id="panel-connection" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">Open API ì—°ê²° ìƒíƒœ</div>
                <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <div id="api-status-indicator" style="width: 16px; height: 16px; border-radius: 50%; background: #9ca3af;"></div>
                        <div>
                            <div style="font-weight: 600; font-size: 16px; margin-bottom: 5px;">ì—°ê²° ìƒíƒœ: <span id="api-status-text">í™•ì¸ ì¤‘...</span></div>
                            <div style="font-size: 14px; color: #6b7280;">ë§ˆì§€ë§‰ í™•ì¸: <span id="api-last-check">-</span></div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="checkApiConnection()" style="margin-top: 10px;">
                        ğŸ”„ ì—°ê²° ìƒíƒœ í™•ì¸
                    </button>
                </div>

                <div class="grid-2">
                    <div style="background: #f9fafb; padding: 15px; border-radius: 8px;">
                        <div style="font-size: 14px; color: #6b7280; margin-bottom: 5px;">WebSocket ì—°ê²°</div>
                        <div style="font-size: 18px; font-weight: 600;" id="websocket-status">-</div>
                    </div>
                    <div style="background: #f9fafb; padding: 15px; border-radius: 8px;">
                        <div style="font-size: 14px; color: #6b7280; margin-bottom: 5px;">REST API ì‘ë‹µì‹œê°„</div>
                        <div style="font-size: 18px; font-weight: 600;" id="api-response-time">-</div>
                    </div>
                    <div style="background: #f9fafb; padding: 15px; border-radius: 8px;">
                        <div style="font-size: 14px; color: #6b7280; margin-bottom: 5px;">ì˜¤ëŠ˜ API í˜¸ì¶œ ìˆ˜</div>
                        <div style="font-size: 18px; font-weight: 600;" id="api-call-count">-</div>
                    </div>
                    <div style="background: #f9fafb; padding: 15px; border-radius: 8px;">
                        <div style="font-size: 14px; color: #6b7280; margin-bottom: 5px;">Rate Limit ìƒíƒœ</div>
                        <div style="font-size: 18px; font-weight: 600;" id="rate-limit-status">ì •ìƒ</div>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px;">
                    <div style="font-weight: 600; margin-bottom: 5px;">âš ï¸ ì£¼ì˜ì‚¬í•­</div>
                    <ul style="margin: 0; padding-left: 20px; font-size: 14px; color: #92400e;">
                        <li>Open API ì—°ê²°ì´ ì›í™œí•˜ì§€ ì•Šì„ ê²½ìš° ìë™ë§¤ë§¤ê°€ ì •ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                        <li>API Rate Limitì„ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.</li>
                        <li>WebSocket ì—°ê²°ì´ ëŠì–´ì§„ ê²½ìš° ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹ ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤.</li>
                    </ul>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">API ì„¤ì •</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">API íƒ€ì„ì•„ì›ƒ (ì´ˆ)</label>
                        <input type="number" class="form-input" id="api_timeout" value="30" min="5" max="60">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜</label>
                        <input type="number" class="form-input" id="api_retry_count" value="3" min="1" max="10">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="auto_reconnect" checked>
                            ìë™ ì¬ì—°ê²° í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="api_logging" checked>
                            API í˜¸ì¶œ ë¡œê¹…
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì„¤ì • -->
        <div id="panel-risk" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">ë¦¬ìŠ¤í¬ ê´€ë¦¬</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">ìµœëŒ€ í¬ì§€ì…˜ í¬ê¸° (%)</label>
                        <input type="number" class="form-input" id="max_position_size" value="30" step="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¼ì¼ ìµœëŒ€ ì†ì‹¤ (%)</label>
                        <input type="number" class="form-input" id="max_daily_loss" value="3" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ê¸°ë³¸ ì†ì ˆ ë¹„ìœ¨ (%)</label>
                        <input type="number" class="form-input" id="stop_loss_rate" value="5" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ê¸°ë³¸ ìµì ˆ ë¹„ìœ¨ (%)</label>
                        <input type="number" class="form-input" id="take_profit_rate" value="10" step="0.5">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="enable_trailing_stop" checked>
                            Trailing Stop í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ATR ìŠ¹ìˆ˜</label>
                        <input type="number" class="form-input" id="trailing_stop_atr_multiplier" value="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="enable_kelly_criterion">
                            ì¼ˆë¦¬ ë°°íŒ… ìê¸ˆ ê´€ë¦¬
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¼ˆë¦¬ ë¹„ìœ¨ (ë³´ìˆ˜ì )</label>
                        <input type="number" class="form-input" id="kelly_fraction" value="0.5" step="0.1" max="1">
                    </div>
                </div>
            </div>
        </div>

        <!-- ì „ëµ ì„¤ì • -->
        <div id="panel-strategies" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">ëª¨ë©˜í…€ ì „ëµ</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="momentum_enabled" checked>
                            í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë‹¨ê¸° ì´ë™í‰ê·  ê¸°ê°„</label>
                        <input type="number" class="form-input" id="momentum_short_ma" value="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¥ê¸° ì´ë™í‰ê·  ê¸°ê°„</label>
                        <input type="number" class="form-input" id="momentum_long_ma" value="20">
                    </div>
                    <div class="form-group">
                        <label class="form-label">RSI ê¸°ê°„</label>
                        <input type="number" class="form-input" id="momentum_rsi_period" value="14">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ë³€ë™ì„± ëŒíŒŒ ì „ëµ</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="vb_enabled" checked>
                            í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">K ê°’ (ë³€ë™í­ ìŠ¹ìˆ˜)</label>
                        <input type="number" class="form-input" id="vb_k_value" value="0.5" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì§„ì… ì‹œê°</label>
                        <input type="time" class="form-input" id="vb_entry_time" value="09:05">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì²­ì‚° ì‹œê°</label>
                        <input type="time" class="form-input" id="vb_exit_time" value="15:15">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">í˜ì–´ íŠ¸ë ˆì´ë”©</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="pairs_enabled">
                            í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ìŠ¤í”„ë ˆë“œ ì„ê³„ê°’ (í‘œì¤€í¸ì°¨)</label>
                        <input type="number" class="form-input" id="pairs_spread_threshold" value="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë¡¤ë°± ê¸°ê°„ (ì¼)</label>
                        <input type="number" class="form-input" id="pairs_lookback_period" value="60">
                    </div>
                </div>
            </div>
        </div>

        <!-- AI ë¶„ì„ ì„¤ì • -->
        <div id="panel-ai" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">AI ë¶„ì„ ì„¤ì •</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="ai_enabled" checked>
                            AI ë¶„ì„ í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ê¸°ë³¸ ë¶„ì„ê¸°</label>
                        <select class="form-select" id="ai_default_analyzer">
                            <option value="gemini" selected>Gemini (Primary AI)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ìµœì†Œ ì‹ ë¢°ë„ ì ìˆ˜</label>
                        <input type="number" class="form-input" id="ai_min_confidence" value="0.7" step="0.1" min="0" max="1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">íƒ€ì„ì•„ì›ƒ (ì´ˆ)</label>
                        <input type="number" class="form-input" id="ai_timeout" value="30">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ì‹œì¥ ë ˆì§ ë¶„ë¥˜</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="market_regime_enabled" checked>
                            í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì—…ë°ì´íŠ¸ ì£¼ê¸° (ì‹œê°„)</label>
                        <input type="number" class="form-input" id="market_regime_interval" value="4">
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ì´ìƒ ê°ì§€</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="anomaly_enabled" checked>
                            í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label">í™•ì¸ ì£¼ê¸° (ë¶„)</label>
                        <input type="number" class="form-input" id="anomaly_check_interval" value="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì•Œë¦¼ ì„ê³„ê°’</label>
                        <input type="number" class="form-input" id="anomaly_alert_threshold" value="0.8" step="0.1" min="0" max="1">
                    </div>
                </div>
            </div>
        </div>

        <!-- ë°±í…ŒìŠ¤íŒ… ì„¤ì • -->
        <div id="panel-backtest" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">ë°±í…ŒìŠ¤íŒ… ì„¤ì •</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">ì´ˆê¸° ìë³¸ê¸ˆ (ì›)</label>
                        <input type="number" class="form-input" id="backtest_initial_capital" value="10000000" step="1000000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ìˆ˜ìˆ˜ë£Œìœ¨ (%)</label>
                        <input type="number" class="form-input" id="backtest_commission_rate" value="0.015" step="0.001">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ìŠ¬ë¦¬í”¼ì§€ (%)</label>
                        <input type="number" class="form-input" id="backtest_slippage_pct" value="0.05" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë¦¬í¬íŠ¸ í˜•ì‹</label>
                        <select class="form-select" id="backtest_report_format">
                            <option value="html" selected>HTML</option>
                            <option value="pdf">PDF</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">íŒŒë¼ë¯¸í„° ìµœì í™”</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">ìµœì í™” ë°©ë²•</label>
                        <select class="form-select" id="optimization_method">
                            <option value="grid">Grid Search</option>
                            <option value="random">Random Search</option>
                            <option value="bayesian" selected>Bayesian Optimization</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì‹œë„ íšŸìˆ˜</label>
                        <input type="number" class="form-input" id="optimization_n_trials" value="50">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ëª©í‘œ ì§€í‘œ</label>
                        <select class="form-select" id="optimization_objective">
                            <option value="sharpe_ratio" selected>Sharpe Ratio</option>
                            <option value="total_return">ì´ ìˆ˜ìµë¥ </option>
                            <option value="max_drawdown">Max Drawdown</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì•Œë¦¼ ì„¤ì • -->
        <div id="panel-notification" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">ì•Œë¦¼ ì±„ë„</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_enabled" checked>
                            ì•Œë¦¼ í™œì„±í™”
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_web_push" checked>
                            ì›¹ ë¸Œë¼ìš°ì € PUSH
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_email">
                            ì´ë©”ì¼
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_telegram">
                            í…”ë ˆê·¸ë¨
                        </label>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">ì•Œë¦¼ ì´ë²¤íŠ¸</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_order_executed" checked>
                            ì£¼ë¬¸ ì²´ê²°
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_ai_signal" checked>
                            AI ë§¤ë§¤ ì‹ í˜¸
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_stop_loss" checked>
                            ì†ì ˆ ë°œë™
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="notif_system_error" checked>
                            ì‹œìŠ¤í…œ ì˜¤ë¥˜
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- UI ì„¤ì • -->
        <div id="panel-ui" class="settings-panel">
            <div class="settings-section">
                <div class="section-title">UI ì„¤ì •</div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">í…Œë§ˆ</label>
                        <select class="form-select" id="ui_theme">
                            <option value="light" selected>ë¼ì´íŠ¸</option>
                            <option value="dark">ë‹¤í¬</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì–¸ì–´</label>
                        <select class="form-select" id="ui_language">
                            <option value="ko" selected>í•œêµ­ì–´</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ìƒˆë¡œê³ ì¹¨ ì£¼ê¸° (ì´ˆ)</label>
                        <input type="number" class="form-input" id="ui_refresh_interval" value="5">
                    </div>
                    <div class="form-group">
                        <label class="form-label checkbox-group">
                            <input type="checkbox" class="form-checkbox" id="ui_show_guide" checked>
                            ê°€ì´ë“œ íˆ¬ì–´ í‘œì‹œ
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë²„íŠ¼ ê·¸ë£¹ -->
        <div class="btn-group">
            <button class="btn btn-primary" onclick="saveSettings()">ğŸ’¾ ì €ì¥</button>
            <button class="btn btn-success" onclick="applySettings()">âœ… ì ìš©</button>
            <button class="btn btn-danger" onclick="resetSettings()">ğŸ”„ ê¸°ë³¸ê°’ ë³µì›</button>
        </div>
    </div>

    <script>
        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.settings-panel').forEach(panel => panel.classList.remove('active'));

            // ì„ íƒí•œ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById('panel-' + tabName).classList.add('active');
        }

        // í…Œë§ˆ í† ê¸€
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const btn = document.querySelector('.theme-toggle');
            if (document.body.classList.contains('dark-mode')) {
                btn.textContent = 'â˜€ï¸ ë¼ì´íŠ¸ ëª¨ë“œ';
            } else {
                btn.textContent = 'ğŸŒ™ ë‹¤í¬ ëª¨ë“œ';
            }
        }

        // ì„¤ì • ì €ì¥
        async function saveSettings() {
            const settings = collectSettings();

            try {
                const response = await fetch('/api/settings', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(settings)
                });

                if (response.ok) {
                    showAlert('success', 'ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    showAlert('error', 'ì„¤ì • ì €ì¥ ì‹¤íŒ¨');
                }
            } catch (error) {
                showAlert('error', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ' + error.message);
            }
        }

        // ì„¤ì • ì ìš©
        async function applySettings() {
            await saveSettings();
            setTimeout(() => {
                window.location.reload();
            }, 1000);
        }

        // ê¸°ë³¸ê°’ ë³µì›
        async function resetSettings() {
            if (!confirm('ëª¨ë“  ì„¤ì •ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const response = await fetch('/api/settings/reset', {method: 'POST'});
                if (response.ok) {
                    showAlert('success', 'ê¸°ë³¸ê°’ìœ¼ë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    setTimeout(() => window.location.reload(), 1500);
                }
            } catch (error) {
                showAlert('error', 'ë³µì› ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ì„¤ì • ìˆ˜ì§‘
        function collectSettings() {
            // ëª¨ë“  ì…ë ¥ í•„ë“œì—ì„œ ì„¤ì • ìˆ˜ì§‘
            const settings = {};
            document.querySelectorAll('.form-input, .form-select, .form-checkbox').forEach(el => {
                if (el.type === 'checkbox') {
                    settings[el.id] = el.checked;
                } else if (el.type === 'number') {
                    settings[el.id] = parseFloat(el.value);
                } else {
                    settings[el.id] = el.value;
                }
            });
            return settings;
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showAlert(type, message) {
            const successAlert = document.getElementById('success-alert');
            const errorAlert = document.getElementById('error-alert');

            if (type === 'success') {
                successAlert.classList.add('show');
                setTimeout(() => successAlert.classList.remove('show'), 3000);
            } else {
                document.getElementById('error-message').textContent = message;
                errorAlert.classList.add('show');
                setTimeout(() => errorAlert.classList.remove('show'), 5000);
            }
        }

        // ì„¤ì • ë¡œë“œ
        async function loadSettings() {
            try {
                const response = await fetch('/api/settings');
                const settings = await response.json();

                // ì„¤ì • ê°’ ì ìš©
                for (const [key, value] of Object.entries(settings)) {
                    const el = document.getElementById(key);
                    if (el) {
                        if (el.type === 'checkbox') {
                            el.checked = value;
                        } else {
                            el.value = value;
                        }
                    }
                }
            } catch (error) {
                console.error('ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // API ì—°ê²° ìƒíƒœ í™•ì¸
        async function checkApiConnection() {
            const indicator = document.getElementById('api-status-indicator');
            const statusText = document.getElementById('api-status-text');
            const lastCheck = document.getElementById('api-last-check');
            const wsStatus = document.getElementById('websocket-status');
            const apiTime = document.getElementById('api-response-time');
            const callCount = document.getElementById('api-call-count');

            indicator.style.background = '#f59e0b';
            statusText.textContent = 'í™•ì¸ ì¤‘...';

            try {
                const startTime = performance.now();
                const response = await fetch('/api/system/status');
                const endTime = performance.now();
                const data = await response.json();

                if (response.ok) {
                    indicator.style.background = '#10b981';
                    statusText.textContent = 'ì •ìƒ ì—°ê²°';
                    apiTime.textContent = `${Math.round(endTime - startTime)}ms`;

                    wsStatus.textContent = data.websocket_connected ? 'ì—°ê²°ë¨ âœ“' : 'ì—°ê²° ì•ˆë¨ âœ—';
                    callCount.textContent = data.api_calls_today || '0';
                } else {
                    indicator.style.background = '#ef4444';
                    statusText.textContent = 'ì—°ê²° ì‹¤íŒ¨';
                }

                lastCheck.textContent = new Date().toLocaleString('ko-KR');
            } catch (error) {
                indicator.style.background = '#ef4444';
                statusText.textContent = 'ì˜¤ë¥˜ ë°œìƒ';
                lastCheck.textContent = new Date().toLocaleString('ko-KR');
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            checkApiConnection();
            setInterval(checkApiConnection, 30000);
        });
    </script>
</body>
</html>
